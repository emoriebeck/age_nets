<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 Workspace | A Minimal Book Example</title>
  <meta name="description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  <meta name="generator" content="bookdown 0.11 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 Workspace | A Minimal Book Example" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Workspace | A Minimal Book Example" />
  
  <meta name="twitter:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  

<meta name="author" content="Yihui Xie" />


<meta name="date" content="2019-06-21" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html">
<link rel="next" href="fit-the-multi-trait-networks-mtnetworks.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Prerequisites</a></li>
<li class="chapter" data-level="2" data-path="workspace.html"><a href="workspace.html"><i class="fa fa-check"></i><b>2</b> Workspace</a><ul>
<li class="chapter" data-level="2.1" data-path="workspace.html"><a href="workspace.html#packages"><i class="fa fa-check"></i><b>2.1</b> Packages</a></li>
<li class="chapter" data-level="2.2" data-path="workspace.html"><a href="workspace.html#load-and-clean-data"><i class="fa fa-check"></i><b>2.2</b> Load and Clean Data</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="fit-the-multi-trait-networks-mtnetworks.html"><a href="fit-the-multi-trait-networks-mtnetworks.html"><i class="fa fa-check"></i><b>3</b> Fit the Multi-Trait Networks {MTnetworks}</a><ul>
<li class="chapter" data-level="3.1" data-path="fit-the-multi-trait-networks-mtnetworks.html"><a href="fit-the-multi-trait-networks-mtnetworks.html#multi-trait-networks"><i class="fa fa-check"></i><b>3.1</b> Multi-Trait Networks</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="STnetworks.html"><a href="STnetworks.html"><i class="fa fa-check"></i><b>4</b> Fit the Single Trait Networks</a></li>
<li class="chapter" data-level="5" data-path="pcors.html"><a href="pcors.html"><i class="fa fa-check"></i><b>5</b> Age Differences in Coherence and Differentiation</a><ul>
<li class="chapter" data-level="5.1" data-path="pcors.html"><a href="pcors.html#Figure1"><i class="fa fa-check"></i><b>5.1</b> Multi-Trait Coherence and Differentiation</a></li>
<li class="chapter" data-level="5.2" data-path="pcors.html"><a href="pcors.html#Figure2"><i class="fa fa-check"></i><b>5.2</b> Single and Mutli-Trait Coherence</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="communities.html"><a href="communities.html"><i class="fa fa-check"></i><b>6</b> Community Structure</a><ul>
<li class="chapter" data-level="6.0.1" data-path="communities.html"><a href="communities.html#plots"><i class="fa fa-check"></i><b>6.0.1</b> Plots</a></li>
<li class="chapter" data-level="6.0.2" data-path="communities.html"><a href="communities.html#matching-across-communities"><i class="fa fa-check"></i><b>6.0.2</b> Matching Across Communities</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="procors.html"><a href="procors.html"><i class="fa fa-check"></i><b>7</b> Profile Correlations</a><ul>
<li class="chapter" data-level="7.1" data-path="procors.html"><a href="procors.html#Figure5"><i class="fa fa-check"></i><b>7.1</b> Profiles Correlation Plots (Figure 5)</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">A Minimal Book Example</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="workspace" class="section level1">
<h1><span class="header-section-number">Chapter 2</span> Workspace</h1>
<div id="packages" class="section level2">
<h2><span class="header-section-number">2.1</span> Packages</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(qgraph)
<span class="kw">library</span>(bootnet)
<span class="kw">library</span>(ggplot2)
<span class="kw">library</span>(psych)
<span class="kw">library</span>(RColorBrewer)
<span class="kw">library</span>(parallel)
<span class="kw">library</span>(broom)
<span class="kw">library</span>(igraph)
<span class="kw">library</span>(gridExtra)
<span class="kw">library</span>(data.table)
<span class="kw">library</span>(plyr)
<span class="kw">library</span>(tidyverse)</code></pre></div>
</div>
<div id="load-and-clean-data" class="section level2">
<h2><span class="header-section-number">2.2</span> Load and Clean Data</h2>
<p>First, we will load in two separate data sets from the SAPA project. The first is the larger set of items from the SAPA project, including comprehensive codebooks, while the second contains only the IPIP personality items but has more participants. We’ll use the codebooks from the former and the data from the latter.</p>
<p>The IPIP data set technically contains three separate scales, the IPIP 100, IPIP50, and the Mini IPIP (20). We’ll use the IPIP 100 for the analyses for the paper and repeat the analyses for the rest of the data sets in Chapter <a href="#ipip2050"><strong>??</strong></a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">data_path &lt;-<span class="st"> &quot;~/Box/networks&quot;</span>
<span class="kw">load</span>(<span class="st">&quot;~/Box/networks/SAPA/SAPAdata18aug2010thru7feb2017.rdata&quot;</span>)
<span class="kw">load</span>(<span class="st">&quot;~/Box/networks/IPIP100items04apr2006thru7feb2017.rdata&quot;</span>)

<span class="co"># There is one row that is duplicated twice, so we&#39;ll remove it</span>
IPIP100items04apr2006thru7feb2017 &lt;-<span class="st"> </span>
<span class="st">  </span>IPIP100items04apr2006thru7feb2017 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(RID) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(<span class="kw">n</span>() <span class="op">==</span><span class="st"> </span><span class="dv">1</span>)

<span class="co"># load custom themes for qgraph </span>
<span class="kw">source</span>(<span class="st">&quot;~/Box/networks/custom_qgraph.R&quot;</span>)</code></pre></div>
<p>First, we will get the item numbers for the IPIP 50.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># get item #&#39;s for miniipip20 items</span>
ipip20_items &lt;-<span class="st"> </span><span class="kw">melt</span>(ItemLists) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(<span class="kw">grepl</span>(<span class="st">&quot;miniIPIP20&quot;</span>, L1) <span class="op">==</span><span class="st"> </span>T <span class="op">&amp;</span><span class="st"> </span>L1 <span class="op">!=</span><span class="st"> &quot;miniIPIP20&quot;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">value =</span> <span class="kw">as.character</span>(value)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(L1) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(L1) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">name =</span> <span class="kw">seq</span>(<span class="dv">1</span>,<span class="kw">n</span>(),<span class="dv">1</span>),
         <span class="dt">name =</span> <span class="kw">paste</span>(L1, name, <span class="dt">sep =</span> <span class="st">&quot;_&quot;</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ungroup</span>()

<span class="co"># get item #&#39;s for ipip50 items</span>
ipip50_items &lt;-<span class="st"> </span><span class="kw">melt</span>(ItemLists) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(<span class="kw">grepl</span>(<span class="st">&quot;IPIP50&quot;</span>, L1) <span class="op">==</span><span class="st"> </span>T <span class="op">&amp;</span><span class="st"> </span>L1 <span class="op">!=</span><span class="st"> &quot;IPIP50&quot;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">value =</span> <span class="kw">as.character</span>(value)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(L1)
ipip50_items &lt;-<span class="st"> </span>ipip50_items <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(L1) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">name =</span> <span class="kw">seq</span>(<span class="dv">1</span>,<span class="kw">n</span>(),<span class="dv">1</span>),
         <span class="dt">name =</span> <span class="kw">paste</span>(L1, name, <span class="dt">sep =</span> <span class="st">&quot;_&quot;</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ungroup</span>()

<span class="co"># get item #&#39;s for the ipip100 items</span>
ipip100_items &lt;-<span class="st"> </span><span class="kw">melt</span>(ItemLists) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(<span class="kw">grepl</span>(<span class="st">&quot;IPIP100&quot;</span>, L1) <span class="op">==</span><span class="st"> </span>T <span class="op">&amp;</span><span class="st"> </span>L1 <span class="op">!=</span><span class="st"> &quot;IPIP100&quot;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">value =</span> <span class="kw">as.character</span>(value)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="st">&quot;q_55&quot;</span>, <span class="st">&quot;IPIP100extraversion20&quot;</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(L1) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(L1) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">name =</span> <span class="kw">seq</span>(<span class="dv">1</span>,<span class="kw">n</span>(),<span class="dv">1</span>),
         <span class="dt">name =</span> <span class="kw">paste</span>(L1, name, <span class="dt">sep =</span> <span class="st">&quot;_&quot;</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ungroup</span>()</code></pre></div>
<p>Now, we’ll get item info, including the text and names of the scales.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## Get item content
<span class="co">#ipip20</span>
ItemInfo20 &lt;-<span class="st"> </span>ItemInfo100 <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(<span class="kw">rownames</span>(.) <span class="op">%in%</span><span class="st"> </span>ipip20_items<span class="op">$</span>value) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">separate</span>(IPIP100, <span class="dt">into =</span> <span class="kw">c</span>(<span class="st">&quot;Inventory&quot;</span>, <span class="st">&quot;Factor&quot;</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Factor =</span> <span class="kw">factor</span>(Factor, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;ES&quot;</span>, <span class="st">&quot;E&quot;</span>, <span class="st">&quot;I&quot;</span>)),
         <span class="dt">Factor =</span> <span class="kw">recode</span>(Factor,<span class="st">`</span><span class="dt">A</span><span class="st">`</span> =<span class="st"> &quot;agreeableness&quot;</span>, <span class="st">`</span><span class="dt">E</span><span class="st">`</span> =<span class="st"> &quot;extraversion&quot;</span>,
                        <span class="st">`</span><span class="dt">ES</span><span class="st">`</span> =<span class="st"> &quot;emotionalstability&quot;</span>,<span class="st">`</span><span class="dt">I</span><span class="st">`</span> =<span class="st"> &quot;intellect&quot;</span>, 
                        <span class="st">`</span><span class="dt">C</span><span class="st">`</span> =<span class="st"> &quot;conscientiousness&quot;</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(Factor)

<span class="co">#ipip50</span>
ItemInfo50 &lt;-<span class="st"> </span>ItemInfo100 <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(<span class="kw">rownames</span>(.) <span class="op">%in%</span><span class="st"> </span>ipip50_items<span class="op">$</span>value) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">separate</span>(IPIP100, <span class="dt">into =</span> <span class="kw">c</span>(<span class="st">&quot;Inventory&quot;</span>, <span class="st">&quot;Factor&quot;</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Factor =</span> <span class="kw">factor</span>(Factor, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;ES&quot;</span>, <span class="st">&quot;E&quot;</span>, <span class="st">&quot;I&quot;</span>)),
         <span class="dt">Factor =</span> <span class="kw">recode</span>(Factor,<span class="st">`</span><span class="dt">A</span><span class="st">`</span> =<span class="st"> &quot;agreeableness&quot;</span>, <span class="st">`</span><span class="dt">E</span><span class="st">`</span> =<span class="st"> &quot;extraversion&quot;</span>,
                        <span class="st">`</span><span class="dt">ES</span><span class="st">`</span> =<span class="st"> &quot;emotionalstability&quot;</span>,<span class="st">`</span><span class="dt">I</span><span class="st">`</span> =<span class="st"> &quot;intellect&quot;</span>, 
                        <span class="st">`</span><span class="dt">C</span><span class="st">`</span> =<span class="st"> &quot;conscientiousness&quot;</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(Factor)

<span class="co">#ipip100</span>
ItemInfo100 &lt;-<span class="st"> </span>ItemInfo100 <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(<span class="kw">rownames</span>(.) <span class="op">%in%</span><span class="st"> </span>ipip100_items<span class="op">$</span>value) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">separate</span>(IPIP100, <span class="dt">into =</span> <span class="kw">c</span>(<span class="st">&quot;Inventory&quot;</span>, <span class="st">&quot;Factor&quot;</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Factor =</span> <span class="kw">factor</span>(Factor, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;ES&quot;</span>, <span class="st">&quot;E&quot;</span>, <span class="st">&quot;I&quot;</span>)),
         <span class="dt">Factor =</span> <span class="kw">recode</span>(Factor,<span class="st">`</span><span class="dt">A</span><span class="st">`</span> =<span class="st"> &quot;agreeableness&quot;</span>, <span class="st">`</span><span class="dt">E</span><span class="st">`</span> =<span class="st"> &quot;extraversion&quot;</span>,
                        <span class="st">`</span><span class="dt">ES</span><span class="st">`</span> =<span class="st"> &quot;emotionalstability&quot;</span>,<span class="st">`</span><span class="dt">I</span><span class="st">`</span> =<span class="st"> &quot;intellect&quot;</span>, 
                        <span class="st">`</span><span class="dt">C</span><span class="st">`</span> =<span class="st"> &quot;conscientiousness&quot;</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(Factor)</code></pre></div>
<p>And the column names.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># get column names for ipip20 items in IPIP data</span>
ipip20_cols &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;RID&quot;</span>, <span class="st">&quot;age&quot;</span>, <span class="st">&quot;gender&quot;</span>, 
                  ipip20_items<span class="op">$</span>value[ipip20_items<span class="op">$</span>value <span class="op">%in%</span>
<span class="st">                  </span><span class="kw">colnames</span>(IPIP100items04apr2006thru7feb2017)])
<span class="co"># get column names for ipip50 items in IPIP data</span>
ipip50_cols &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;RID&quot;</span>, <span class="st">&quot;age&quot;</span>, <span class="st">&quot;gender&quot;</span>, 
                  ipip50_items<span class="op">$</span>value[ipip50_items<span class="op">$</span>value <span class="op">%in%</span>
<span class="st">                  </span><span class="kw">colnames</span>(IPIP100items04apr2006thru7feb2017)])
<span class="co"># get column names for ipip100 items in IPIP data</span>
ipip100_cols &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;RID&quot;</span>, <span class="st">&quot;age&quot;</span>, <span class="st">&quot;gender&quot;</span>, 
                  ipip100_items<span class="op">$</span>value[ipip100_items<span class="op">$</span>value <span class="op">%in%</span>
<span class="st">                  </span><span class="kw">colnames</span>(IPIP100items04apr2006thru7feb2017)])</code></pre></div>
<p>And subset the data based on those items into new data frames.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># subset IPIP50 &amp; IPIP100 SAPA data</span>
ipip20  &lt;-<span class="st"> </span>IPIP100items04apr2006thru7feb2017[, ipip20_cols]
ipip50  &lt;-<span class="st"> </span>IPIP100items04apr2006thru7feb2017[, ipip50_cols]
ipip100 &lt;-<span class="st"> </span>IPIP100items04apr2006thru7feb2017[, ipip100_cols]</code></pre></div>
<p>And then rename the column names of the new data frames using their putative Big 5 Traits.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># rename columns by trait</span>
<span class="kw">colnames</span>(ipip20)[<span class="dv">4</span><span class="op">:</span><span class="dv">23</span>]   &lt;-<span class="st"> </span>ipip20_items<span class="op">$</span>name
<span class="kw">colnames</span>(ipip50)[<span class="dv">4</span><span class="op">:</span><span class="dv">53</span>]   &lt;-<span class="st"> </span>ipip50_items<span class="op">$</span>name
<span class="kw">colnames</span>(ipip100)[<span class="dv">4</span><span class="op">:</span><span class="dv">103</span>] &lt;-<span class="st"> </span>ipip100_items<span class="op">$</span>name</code></pre></div>
<p>And create a list of column names for later.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">e &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;quiet&quot;</span>, <span class="st">&quot;life_party&quot;</span>, <span class="st">&quot;draw_attention&quot;</span>, <span class="st">&quot;center_attention&quot;</span>, <span class="st">&quot;dont_talk&quot;</span>,
       <span class="st">&quot;comfortable_others&quot;</span>, <span class="st">&quot;little2say&quot;</span>, <span class="st">&quot;background&quot;</span>, <span class="st">&quot;start_convo&quot;</span>, <span class="st">&quot;talk@parties&quot;</span>)
a &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;int_people&quot;</span>, <span class="st">&quot;-int_problems&quot;</span>, <span class="st">&quot;-int_others&quot;</span>, <span class="st">&quot;-concern&quot;</span>, <span class="st">&quot;others_emotions&quot;</span>, 
       <span class="st">&quot;soft_heart&quot;</span>, <span class="st">&quot;insult&quot;</span>, <span class="st">&quot;ease&quot;</span>, <span class="st">&quot;sympathize&quot;</span>, <span class="st">&quot;time4others&quot;</span>)
c &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;prepared&quot;</span>, <span class="st">&quot;exacting&quot;</span>, <span class="st">&quot;schedule&quot;</span>, <span class="st">&quot;chores&quot;</span>, <span class="st">&quot;leave_belongings&quot;</span>, <span class="st">&quot;order&quot;</span>, 
       <span class="st">&quot;make_mess&quot;</span>, <span class="st">&quot;forget_place&quot;</span>, <span class="st">&quot;details&quot;</span>, <span class="st">&quot;shirk_duties&quot;</span>)
n &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;disturbed&quot;</span>, <span class="st">&quot;relaxed&quot;</span>, <span class="st">&quot;change_mood&quot;</span>, <span class="st">&quot;irritated&quot;</span>, <span class="st">&quot;stressed&quot;</span>, <span class="st">&quot;upset&quot;</span>,
       <span class="st">&quot;mood_swings&quot;</span>, <span class="st">&quot;often_blue&quot;</span>, <span class="st">&quot;seldon_blue&quot;</span>, <span class="st">&quot;worry&quot;</span>)
o &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;ideas&quot;</span>, <span class="st">&quot;not_abstract&quot;</span>, <span class="st">&quot;quick_understand&quot;</span>, <span class="st">&quot;no_imagination&quot;</span>, <span class="st">&quot;rich_vocab&quot;</span>, 
       <span class="st">&quot;imagination&quot;</span>, <span class="st">&quot;diff_abstract&quot;</span>, <span class="st">&quot;exc_ideas&quot;</span>, <span class="st">&quot;reflect&quot;</span>, <span class="st">&quot;diff_words&quot;</span>)


all_cols20 &lt;-<span class="st"> </span><span class="kw">paste</span>(<span class="kw">rep</span>(<span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;n&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;o&quot;</span>), <span class="dt">each =</span> <span class="dv">4</span>), <span class="kw">c</span>(<span class="kw">paste</span>(<span class="st">&quot;0&quot;</span>, <span class="kw">seq</span>(<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">1</span>), <span class="dt">sep =</span> <span class="st">&quot;&quot;</span>)), <span class="dt">sep =</span> <span class="st">&quot;&quot;</span>)
all_cols50 &lt;-<span class="st"> </span><span class="kw">paste</span>(<span class="kw">rep</span>(<span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;n&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;o&quot;</span>), <span class="dt">each =</span> <span class="dv">10</span>), <span class="kw">c</span>(<span class="kw">paste</span>(<span class="st">&quot;0&quot;</span>, <span class="kw">seq</span>(<span class="dv">1</span>,<span class="dv">9</span>,<span class="dv">1</span>), <span class="dt">sep =</span> <span class="st">&quot;&quot;</span>), <span class="st">&quot;10&quot;</span>), <span class="dt">sep =</span> <span class="st">&quot;&quot;</span>)
all_cols100 &lt;-<span class="st"> </span><span class="kw">paste</span>(<span class="kw">rep</span>(<span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;n&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;o&quot;</span>), <span class="dt">each =</span> <span class="dv">20</span>), <span class="kw">c</span>(<span class="kw">paste</span>(<span class="st">&quot;0&quot;</span>, <span class="kw">seq</span>(<span class="dv">1</span>,<span class="dv">9</span>,<span class="dv">1</span>), <span class="dt">sep =</span> <span class="st">&quot;&quot;</span>), <span class="kw">seq</span>(<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">1</span>)), <span class="dt">sep =</span> <span class="st">&quot;&quot;</span>)</code></pre></div>
<p>Now, we’ll create a function to recode the age variable to account for the smaller sample sizes among the older participants in the sample.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># create new age variable since sample sizes too small for older ages</span>
<span class="co"># necessary to have all pairwise observations for correlations</span>
recode_age &lt;-<span class="st"> </span><span class="cf">function</span>(df){
  df<span class="op">$</span>age2 &lt;-<span class="st"> </span>df<span class="op">$</span>age
  df<span class="op">$</span>age2[df<span class="op">$</span>age <span class="op">&gt;=</span><span class="st"> </span><span class="dv">60</span> <span class="op">&amp;</span><span class="st"> </span>df<span class="op">$</span>age <span class="op">&lt;</span><span class="st"> </span><span class="dv">65</span>] &lt;-<span class="st"> </span><span class="fl">62.5</span>
  df<span class="op">$</span>age2[df<span class="op">$</span>age <span class="op">&gt;=</span><span class="st"> </span><span class="dv">65</span> <span class="op">&amp;</span><span class="st"> </span>df<span class="op">$</span>age <span class="op">&lt;</span><span class="st"> </span><span class="dv">70</span>] &lt;-<span class="st"> </span><span class="fl">67.5</span>
  df<span class="op">$</span>age2[df<span class="op">$</span>age <span class="op">&gt;=</span><span class="st"> </span><span class="dv">70</span> <span class="op">&amp;</span><span class="st"> </span>df<span class="op">$</span>age <span class="op">&lt;</span><span class="st"> </span><span class="dv">75</span>] &lt;-<span class="st"> </span><span class="fl">72.5</span>
  df<span class="op">$</span>age2[df<span class="op">$</span>age <span class="op">&gt;=</span><span class="st"> </span><span class="dv">75</span>] &lt;-<span class="st"> </span><span class="dv">78</span> <span class="co"># based on median of sample &gt;= 75</span>
  df<span class="op">$</span>age2 &lt;-<span class="st"> </span><span class="kw">factor</span>(df<span class="op">$</span>age2)
  df &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw">mutate</span>(<span class="dt">age_groups =</span> <span class="kw">mapvalues</span>(age, <span class="dv">10</span><span class="op">:</span><span class="dv">79</span>, <span class="kw">rep</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">7</span>, <span class="dt">each =</span> <span class="dv">10</span>), <span class="dt">warn_missing =</span> F)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span>tbl_df
}

ipip20  &lt;-<span class="st"> </span><span class="kw">recode_age</span>(ipip20)
ipip50  &lt;-<span class="st"> </span><span class="kw">recode_age</span>(ipip50)
ipip100 &lt;-<span class="st"> </span><span class="kw">recode_age</span>(ipip100)</code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="fit-the-multi-trait-networks-mtnetworks.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": ["age_nets.pdf", "age_nets.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
